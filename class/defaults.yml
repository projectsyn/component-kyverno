parameters:
  kyverno:
    namespace: syn-kyverno
    images:
      kyverno:
        registry: ghcr.io
        repository: kyverno/kyverno
        version: v1.5.1
      pre:
        registry: ghcr.io
        repository: kyverno/kyvernopre
        version: ${kyverno:images:kyverno:version}

    manifest_version: ${kyverno:images:kyverno:version}
    manifest_url: https://raw.githubusercontent.com/kyverno/kyverno/${kyverno:manifest_version}/definitions

    replicas: 3

    monitoring:
      enabled: true

    podDisruptionBudget:
      minAvailable: 1

    # One of 'master', 'infra', null
    nodeSelectorRole: master

    affinity:
      podAntiAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          - topologyKey: kubernetes.io/hostname
            labelSelector:
              matchExpressions:
                - key: app
                  operator: In
                  values:
                    - kyverno

    resources:
      kyverno:
        limits:
          memory: 512Mi
        requests:
          cpu: 100m
          memory: 50Mi
      pre:
        limits:
          cpu: 100m
          memory: 256Mi
        requests:
          cpu: 10m
          memory: 64Mi

    resourceFilters:
      - '[Event,*,*]'
      - '[*,kube-system,*]'
      - '[*,kube-public,*]'
      - '[*,kube-node-lease,*]'
      - '[Node,*,*]'
      - '[APIService,*,*]'
      - '[TokenReview,*,*]'
      - '[SubjectAccessReview,*,*]'
      - '[SelfSubjectAccessReview,*,*]'
      - '[*,kyverno,*]'
      - '[Binding,*,*]'
      - '[ReplicaSet,*,*]'
      - '[ReportChangeRequest,*,*]'
      - '[ClusterReportChangeRequest,*,*]'
      - '[PolicyReport,*,*]'
      - '[ClusterPolicyReport,*,*]'
    additionalClusterRoles: {}
    additionalRoleBindings: {}
    excludeGroupRole:
      - system:serviceaccounts:kube-system
      - system:nodes
      - system:kube-scheduler
    generateSuccessEvents: 'false'
    # Pass extra args to the kyverno container
    extraArgs: []
